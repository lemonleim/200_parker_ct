<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Church 3D Model with Hotspots</title>

  <!-- Model Viewer -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

  <!-- Panorama Viewer -->
  <script src="https://cdn.pannellum.org/2.5/pannellum.js"></script>
  <link rel="stylesheet" href="https://cdn.pannellum.org/2.5/pannellum.css"/>

  <style>
    body { margin: 0; font-family: sans-serif; }
    #panorama { width: 100%; height: 100vh; display: none; }

    /* Hotspot dot styling */
    .hotspot {
      width: 12px;
      height: 12px;
      background-color: red;
      border-radius: 50%;
      cursor: pointer;
      border: 2px solid white;
      position: relative; /* needed for tooltip */
      transition: transform 0.2s, background-color 0.2s;
    }

    .hotspot:hover {
      transform: scale(1.5);
      background-color: yellow;
    }

    /* Tooltip */
    .hotspot::after {
      content: attr(data-label);
      position: absolute;
      bottom: 150%; /* above the dot */
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.7);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s;
    }

    .hotspot:hover::after {
      opacity: 1;
    }

    /* Optional: Back button for panorama */
    #back-btn {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 1000;
      padding: 8px 12px;
      background: rgba(0,0,0,0.6);
      color: white;
      border: none;
      cursor: pointer;
      font-size: 14px;
      display: none;
    }
  </style>
</head>
<body>

  <!-- 3D Model -->
  <model-viewer src="https://3d-models-bl.s3.us-east-2.amazonaws.com/200_parker_court.glb" camera-controls preload interaction-prompt="none" style="width:100%; height:100vh;" min-camera-orbit="auto auto 10m" max-camera-orbit="auto auto 50m">
    <!-- Hotspots as dots -->
    <div slot="hotspot-1" class="hotspot" data-position="-9m 1.5m 2.75m" data-normal="0m 1m 0m" data-label="Meeting Room" onclick="showPano('https://lemonleim.github.io/200_parker_ct/room_1.JPG')"></div>
    <div slot="hotspot-2" class="hotspot" data-position="-5m 1.5m 2m" data-normal="0m 1m 0m" data-label="Large Room 1" onclick="showPano('https://lemonleim.github.io/200_parker_ct/room_2.JPG')"></div>
    <div slot="hotspot-3" class="hotspot" data-position="0m 1.5m 1m" data-normal="0m 1m 0m" data-label="Large Room 2" onclick="showPano('https://lemonleim.github.io/200_parker_ct/room_3.JPG')"></div>
    <div slot="hotspot-4" class="hotspot" data-position="4m 1.5m .25m" data-normal="0m 1m 0m" data-label="Worship" onclick="showPano('https://lemonleim.github.io/200_parker_ct/room_4.JPG')"></div>
  </model-viewer>

  <!-- Panorama Viewer -->
  <div id="panorama"></div>

  <!-- Back button -->
  <button id="back-btn" onclick="hidePano()">Back to Model</button>

  <script>
    let panoViewer;

    function showPano(img) {
      // Hide 3D model
      document.querySelector('model-viewer').style.display = 'none';
      document.getElementById('panorama').style.display = 'block';
      document.getElementById('back-btn').style.display = 'block';

      // Initialize pannellum viewer
      panoViewer = pannellum.viewer('panorama', {
        type: 'equirectangular',
        panorama: img,
        autoLoad: true,
      });
    }

    function hidePano() {
      document.querySelector('model-viewer').style.display = 'block';
      document.getElementById('panorama').style.display = 'none';
      document.getElementById('back-btn').style.display = 'none';
    }
  </script>

</body>
</html>


